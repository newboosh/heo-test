# Merge Report Template
# Phase 11: PR Review & Merge (Release Manager)
#
# Contains the gate decision verdict, PR review loop results, and merge details.
# Written by the orchestrate command after the PR is reviewed and merged.

# --- Handoff envelope (standard for all 13 phases) ---
phase: 11
phase_name: merge
role: release_manager
status: complete
timestamp: "2026-01-28T00:00:00Z"
depends_on: ci_cd
_schema_version: "1.0"

summary: |
  Gate decision: SHIP. CodeRabbit review resolved. PR #42 merged successfully.

outputs:
  - .sprint/merge-report.yaml

open_issues: []

signals:
  pass: true
  confidence: high
  blockers: []

# --- Phase-specific body ---

# REQUIRED: Gate decision (from skills/gate-decision/, carried from Phase 10)
gate_decision:
  verdict: SHIP  # SHIP | REVISE | BLOCKED
  timestamp: "2026-01-28T00:00:00Z"
  rationale: |
    All signals green. Code review approved, no security findings,
    all tests passing with 87% coverage.

  signal_summary:
    code_review:
      pass: true
      unresolved_issues: 0
      severity_max: info
    qa:
      pass: true
      tests_passing: "42/42"
      coverage: 87
      lint_clean: true
      type_check_clean: true
      acceptance_criteria_met: "2/2"
    security_review:
      pass: true
      vulnerabilities: 0
      severity_max: none
    sentinel:
      pass: true
      blocking_count: 0
      total_issues: 3
      has_report: true

  blockers: []
  action: "Create pull request"

# PR review loop results
pr_review:
  reviewer: coderabbit
  review_cycles: 2
  comments_total: 5
  comments_resolved: 5

# Merge details
merge:
  pr_number: 42
  pr_url: "https://github.com/org/repo/pull/42"
  merge_commit: "abc123def456"
  target_branch: main
  merged_at: "2026-01-28T00:00:00Z"

# Files changed summary
files_changed:
  - "src/services/market_service.py"
  - "src/api/markets.py"
  - "tests/unit/test_market_service.py"
  - "tests/integration/test_markets_api.py"
